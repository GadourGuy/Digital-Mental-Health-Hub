<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Student Dashboard</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Arimo:wght@400;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    
    <link rel="stylesheet" th:href="@{/css/student/student-home.css}" />
  </head>
  <body>
    <div class="dashboard-container">
      
      <div th:replace="fragments/Student-navbar :: navbar(activeTab='home')"></div>

      <main class="main-content">
        <div class="welcome-banner">
          <div class="welcome-title" th:text="'Welcome back, ' + ${session.user.name} + '! ðŸ‘‹'">
            Welcome back!
          </div>
          <div>Continue your mental wellness journey today</div>
        </div>

        <div class="quote-banner">
          ðŸ’™ It's okay to not be okay. Reach out for support.
        </div>

        <div class="section-title">Quick Actions</div>
        <div class="quick-actions">
          <a th:href="@{/student/mood-tracker}" class="action-card">
            <div class="card-top">
              <span class="card-label">Track Your Mood</span>
              <i class="fa-solid fa-heart-pulse" style="color: #f6339a; font-size: 20px"></i>
            </div>
            <div class="card-desc">Log how you're feeling today</div>
          </a>

          <a th:href="@{/student/chatbot}" class="action-card">
            <div class="card-top">
              <span class="card-label">Chat with AI</span>
              <i class="fa-solid fa-robot" style="color: #2b7fff; font-size: 20px"></i>
            </div>
            <div class="card-desc">Get instant support anytime</div>
          </a>

          <a th:href="@{/student/emergency}" class="action-card" style="background: #fef2f2; border-color: #ffc9c9">
            <div class="card-top">
              <span class="card-label" style="color: #c10007">Emergency Help</span>
              <i class="fa-solid fa-triangle-exclamation" style="color: #e7000b; font-size: 20px"></i>
            </div>
            <div class="card-desc" style="color: #e7000b">
              Immediate assistance available
            </div>
          </a>
        </div>

        <div class="dashboard-grid">
          
          <div class="content-card">
            <div class="section-title">Weekly Progress</div>
            <div style="color: var(--text-gray); font-size: 14px; margin-bottom: 24px;">
              Your wellness activities this week
            </div>

            <div class="progress-item">
              <div class="progress-header">
                <span>Completed Activities</span>
                <span th:text="(${completedCount} ?: 0) + '/7'">0/7</span>
              </div>
              <div class="progress-track">
                <div class="progress-fill" style="background: #030213"
                     th:style="'width: ' + ((${completedCount} ?: 0) * 100 / 7) + '%; background: #0A0A0A;'"></div>
              </div>
            </div>

            <div class="progress-item">
              <div class="progress-header">
                <span>Mood Check-ins</span>
                <span th:text="(${moodCount} ?: 0) + '/7'">0/7</span>
              </div>
              <div class="progress-track">
                <div class="progress-fill" style="background: #030213"
                     th:style="'width: ' + ((${moodCount} ?: 0) * 100 / 7) + '%; background: #0A0A0A;'"></div>
              </div>
            </div>
          </div>

          <div class="content-card">
            <div class="section-title">Recent Activities</div>
            <div style="color: var(--text-gray); font-size: 14px; margin-bottom: 24px;">
              Your latest interactions
            </div>

            <div class="activity-list">
              <div class="activity-item" th:each="activity : ${recentActivities}">
                <div class="activity-icon"
                     th:style="${activity.type == 'MOOD'} ? 'background: #FCE7F3; color: #E60076;' : 
                               (${activity.type == 'EXERCISE'} ? 'background: #DCFCE7; color: #00A63E;' : 'background: #DBEAFE; color: #155DFC;')">
                  <i th:if="${activity.type == 'MOOD'}" class="fa-solid fa-face-smile"></i>
                  <i th:if="${activity.type == 'EXERCISE'}" class="fa-solid fa-person-walking"></i>
                  <i th:if="${activity.type != 'MOOD' and activity.type != 'EXERCISE'}" class="fa-solid fa-book-open"></i>
                </div>
                <div>
                  <div style="font-size: 14px; font-weight: bold; color: #0a0a0a" th:text="${activity.title}">
                    Logged mood: Happy
                  </div>
                  <div style="font-size: 12px; color: var(--text-gray)" th:text="${activity.timeAgo}">
                    2 hours ago
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>

      <a th:href="@{/student/chatbot}" class="fab" style="text-decoration: none">
        <i class="fa-solid fa-robot"></i>
      </a>
    </div>
  </body>
</html>